<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ëª¨ì˜íˆ¬ì ì‹œìŠ¤í…œ â€” ë¡œê·¸ì¸</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@700;800&family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #0b0f14;
      --card: rgba(18, 25, 35, 0.88);
      --line: #1e2a3a;
      --line2: #243444;
      --muted: #93a4b8;
      --txt: #eaf0f7;
      --pri: #2b7cff;
      --pri-glow: rgba(43,124,255,0.25);
      --warn: #ffd479;
      --up: #ff4d4d;
      --accent: #00d4ff;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: 'Noto Sans KR', sans-serif;
      background: var(--bg);
      color: var(--txt);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow-y: auto;
      position: relative;
    }

    /* â”€â”€ ë°°ê²½ íŒŒí‹°í´ ìº”ë²„ìŠ¤ â”€â”€ */
    #bg-canvas {
      position: fixed;
      inset: 0;
      z-index: 0;
      pointer-events: none;
    }

    /* â”€â”€ ë°°ê²½ ê·¸ë¦¬ë“œ â”€â”€ */
    body::before {
      content: '';
      position: fixed;
      inset: 0;
      background-image:
        linear-gradient(rgba(43,124,255,0.04) 1px, transparent 1px),
        linear-gradient(90deg, rgba(43,124,255,0.04) 1px, transparent 1px);
      background-size: 48px 48px;
      z-index: 0;
      pointer-events: none;
    }

    /* â”€â”€ ì¤‘ì•™ ê¸€ë¡œìš° â”€â”€ */
    body::after {
      content: '';
      position: fixed;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      width: 600px; height: 600px;
      background: radial-gradient(ellipse, rgba(43,124,255,0.07) 0%, transparent 70%);
      z-index: 0;
      pointer-events: none;
    }

    /* â”€â”€ ë˜í¼ â”€â”€ */
    .wrap {
      position: relative;
      z-index: 1;
      width: 100%;
      max-width: 420px;
      padding: 0 20px;
      animation: fadeUp 0.6s cubic-bezier(0.22,1,0.36,1) both;
    }
    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(24px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    /* â”€â”€ ë¡œê³  ì˜ì—­ â”€â”€ */
    .logo-area {
      text-align: center;
      margin-bottom: 36px;
    }
    .logo-icon {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 56px; height: 56px;
      background: linear-gradient(135deg, #1a3a6e, #0d1f3c);
      border: 1px solid rgba(43,124,255,0.4);
      border-radius: 16px;
      margin-bottom: 16px;
      box-shadow: 0 0 24px rgba(43,124,255,0.2);
    }
    .logo-icon svg { width: 28px; height: 28px; }
    .logo-title {
      font-family: 'Syne', sans-serif;
      font-size: 22px;
      font-weight: 800;
      color: var(--txt);
      letter-spacing: 1px;
      display: block;
    }
    .logo-sub {
      font-size: 12px;
      color: var(--muted);
      letter-spacing: 0.5px;
      margin-top: 4px;
      display: block;
    }

    /* â”€â”€ ì¹´ë“œ â”€â”€ */
    .card {
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: 22px;
      padding: 32px;
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      box-shadow:
        0 24px 48px rgba(0,0,0,0.5),
        0 0 0 1px rgba(255,255,255,0.03) inset,
        0 1px 0 rgba(255,255,255,0.06) inset;
      position: relative;
      overflow-y: auto;
    }
    /* ì¹´ë“œ ìƒë‹¨ ë¼ì¸ */
    .card::before {
      content: '';
      position: absolute;
      top: 0; left: 10%; right: 10%;
      height: 1px;
      background: linear-gradient(90deg, transparent, var(--pri), transparent);
      opacity: 0.6;
    }

    .card-title {
      font-family: 'Syne', sans-serif;
      font-size: 17px;
      font-weight: 700;
      margin-bottom: 24px;
      color: var(--txt);
    }

    /* â”€â”€ ì…ë ¥ í•„ë“œ â”€â”€ */
    .field { margin-bottom: 14px; }
    .field label {
      display: block;
      font-size: 10.5px;
      font-weight: 700;
      color: var(--muted);
      letter-spacing: 1.2px;
      text-transform: uppercase;
      margin-bottom: 7px;
    }
    .field input {
      width: 100%;
      height: 46px;
      background: rgba(10, 16, 24, 0.8);
      border: 1px solid var(--line2);
      border-radius: 12px;
      color: var(--txt);
      padding: 0 16px;
      font-size: 14px;
      font-family: 'Noto Sans KR', sans-serif;
      outline: none;
      transition: border-color 0.2s, box-shadow 0.2s;
    }
    .field input:focus {
      border-color: var(--pri);
      box-shadow: 0 0 0 3px var(--pri-glow);
    }
    .field input::placeholder { color: #3a4a5a; }

    /* â”€â”€ ë¡œê·¸ì¸ ë²„íŠ¼ â”€â”€ */
    .btn-login {
      width: 100%;
      height: 48px;
      margin-top: 10px;
      background: linear-gradient(135deg, #1e5eff, #2b7cff);
      border: 0;
      border-radius: 12px;
      color: #fff;
      font-family: 'Noto Sans KR', sans-serif;
      font-size: 15px;
      font-weight: 700;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      transition: all 0.2s;
      box-shadow: 0 4px 20px rgba(43,124,255,0.35);
      position: relative;
      overflow-y: auto;
    }
    .btn-login::after {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(rgba(255,255,255,0.08), transparent);
    }
    .btn-login:hover {
      transform: translateY(-1px);
      box-shadow: 0 8px 28px rgba(43,124,255,0.45);
    }
    .btn-login:active { transform: translateY(0); }
    .btn-login:disabled { opacity: 0.4; cursor: not-allowed; transform: none; }

    /* â”€â”€ ì—ëŸ¬ ë©”ì‹œì§€ â”€â”€ */
    .error-msg {
      display: none;
      margin-top: 12px;
      padding: 10px 14px;
      background: rgba(255,77,77,0.1);
      border: 1px solid rgba(255,77,77,0.25);
      border-radius: 10px;
      font-size: 12.5px;
      color: #ff7070;
      text-align: center;
    }
    .error-msg.show { display: block; animation: shake 0.3s ease; }
    @keyframes shake {
      0%,100% { transform: translateX(0); }
      25%      { transform: translateX(-4px); }
      75%      { transform: translateX(4px); }
    }

    /* â”€â”€ ìŠ¤í”¼ë„ˆ â”€â”€ */
    .spinner {
      display: inline-block;
      width: 16px; height: 16px;
      border: 2px solid rgba(255,255,255,0.3);
      border-top-color: #fff;
      border-radius: 50%;
      animation: spin 0.6s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    /* â”€â”€ í•˜ë‹¨ ì•ˆë‚´ â”€â”€ */
    .info-row {
      margin-top: 20px;
      padding: 14px 16px;
      background: rgba(43,124,255,0.05);
      border: 1px solid rgba(43,124,255,0.12);
      border-radius: 12px;
      font-size: 11.5px;
      color: var(--muted);
      line-height: 1.7;
    }
    .info-row b { color: var(--pri); }

    @media (max-width: 440px) {
      .card { padding: 24px 20px; border-radius: 18px; }
      .logo-title { font-size: 19px; }
    }
  </style>
</head>
<body>

<canvas id="bg-canvas"></canvas>

<div class="wrap">
  <!-- ë¡œê³  -->
  <div class="logo-area">
    <div class="logo-icon">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" style="color:#2b7cff">
        <polyline points="22 7 13.5 15.5 8.5 10.5 2 17"/>
        <polyline points="16 7 22 7 22 13"/>
      </svg>
    </div>
    <span class="logo-title">ëª¨ì˜íˆ¬ì ì‹œìŠ¤í…œ</span>
    <span class="logo-sub">ë¶€í‰ì¤‘í•™êµ ê¸ˆìœµ êµìœ¡ í”Œë«í¼</span>
  </div>

  <!-- ë¡œê·¸ì¸ ì¹´ë“œ -->
  <div class="card">
    <div class="card-title">ë¡œê·¸ì¸</div>

    <div class="field">
      <label>ì´ë©”ì¼</label>
      <input id="loginEmail" type="email" placeholder="example@school.kr" autocomplete="email" />
    </div>
    <div class="field">
      <label>ë¹„ë°€ë²ˆí˜¸</label>
      <input id="loginPw" type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" autocomplete="current-password" />
    </div>

    <button id="loginBtn" class="btn-login">ë¡œê·¸ì¸</button>
    <div id="errorMsg" class="error-msg">ì´ë©”ì¼ ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.</div>

    <div class="info-row">
      <b>í•™ìƒ</b>ì€ ë¡œê·¸ì¸ í›„ íˆ¬ì í™”ë©´ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.<br>
      <b>ê´€ë¦¬ì</b>ëŠ” ë¡œê·¸ì¸ í›„ ê´€ë¦¬ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.<br>
      ê³„ì •ì´ ì—†ë‹¤ë©´ ì„ ìƒë‹˜ê»˜ ë¬¸ì˜í•˜ì„¸ìš”.
    <div style="margin-top:16px; border-top:1px solid #1e2d3d; padding-top:16px; font-size:12px; line-height:1.9; color:#6b8099;">
      <div style="font-size:12px; font-weight:700; color:#00d4ff; letter-spacing:1px; margin-bottom:12px;">ğŸ“‹ ì°¸ì—¬ ì „ ê¼­ ì½ì–´ì£¼ì„¸ìš”</div>
      <div style="display:flex; flex-direction:column; gap:9px;">
        <div style="display:flex; gap:10px;"><span style="color:#2b7cff; font-weight:700; flex-shrink:0;">1.</span><span><b style="color:#e2eaf4;">ìˆœìˆ˜ êµìœ¡ìš© í”Œë«í¼</b> â€” ë„ë°•ì´ë‚˜ ì‚¬í–‰ì„± ê²Œì„ì´ ì•„ë‹ˆë©°, ì‹¤ì œ íˆ¬ìë¥¼ ì¢…ìš©í•˜ê±°ë‚˜ ë¶€ì¶”ê¸°ì§€ ì•ŠìŠµë‹ˆë‹¤. ë˜í•œ ì–´ë– í•œ ê°œì¸ì •ë³´ë„ ìˆ˜ì§‘í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</span></div>
        <div style="display:flex; gap:10px;"><span style="color:#2b7cff; font-weight:700; flex-shrink:0;">2.</span><span><b style="color:#e2eaf4;">ê²½ìŸë³´ë‹¤ëŠ” í•™ìŠµ</b> â€” ìˆ˜ìµë¥  ê²½ìŸë³´ë‹¤ ê¸°ì—… ê°€ì¹˜ ë³€í™”ì˜ ì›ì¸ì„ ë¶„ì„í•˜ëŠ” 'ê³¼ì •'ì— ì˜ë¯¸ë¥¼ ë‘ì‹œê¸° ë°”ëë‹ˆë‹¤.</span></div>
        <div style="display:flex; gap:10px;"><span style="color:#2b7cff; font-weight:700; flex-shrink:0;">3.</span><span><b style="color:#e2eaf4;">ë°ì´í„° ê¸°ë°˜ ë¶„ì„</b> â€” ê°ì´ ì•„ë‹Œ ìœ íŠœë¸Œ, ë‰´ìŠ¤, AI(ChatGPT, ì œë¯¸ë‚˜ì´) ë“±ì„ í™œìš©í•´ ìŠ¤ìŠ¤ë¡œ ì •ë³´ë¥¼ íŒë‹¨í•˜ì„¸ìš”.</span></div>
        <div style="display:flex; gap:10px;"><span style="color:#2b7cff; font-weight:700; flex-shrink:0;">4.</span><span><b style="color:#e2eaf4;">ì´ˆê¸° ìê¸ˆ ì§€ê¸‰</b> â€” í•™ìŠµìš© ê°€ìƒ ë¨¸ë‹ˆ <b style="color:#ffd479;">$70,000</b>ê°€ ì§€ê¸‰ë©ë‹ˆë‹¤.</span></div>
        <div style="display:flex; gap:10px;"><span style="color:#2b7cff; font-weight:700; flex-shrink:0;">5.</span><span><b style="color:#e2eaf4;">ì¦ì‹œ ìš´ì˜ ì‹œê°„</b> â€” ğŸ‡ºğŸ‡¸ ë¯¸êµ­: 23:30 ~ 06:00 &nbsp;|&nbsp; ğŸ‡°ğŸ‡· í•œêµ­: 09:00 ~ 15:30<br><span style="font-size:11px;">â€» ì¥ ë§ˆê° ì´í›„ì—ëŠ” ì‹œì„¸ ë³€ë™ì´ ì—†ìœ¼ë©°, ìˆ˜ìµë¥ ì€ ë§ˆê° ì‹œì  ê°€ê²©ìœ¼ë¡œ ê³ ì •ë©ë‹ˆë‹¤.</span></span></div>
        <div style="display:flex; gap:10px;"><span style="color:#ff4455; font-weight:700; flex-shrink:0;">6.</span><span><b style="color:#ff4455;">ë¶€ì • í–‰ìœ„ ì—„ê¸ˆ</b> â€” í•´í‚¹ì´ë‚˜ ë¶€ì •í•œ ë°©ë²•ìœ¼ë¡œ ìì‚°ì„ ëŠ˜ë¦¬ê±°ë‚˜ íƒ€ì¸ì˜ ê³„ì •ì„ ì¡°ì‘í•˜ëŠ” ê²½ìš° ì¦‰ì‹œ íƒˆë½ ì²˜ë¦¬ë©ë‹ˆë‹¤.</span></div>
      </div>
    </div>
    </div>
  </div>
</div>

</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-app.js";
  import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-firestore.js";
  import { getAuth, signInWithEmailAndPassword, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyD0Cl5VyhKivRExMLECf5uR7FhaCOov-s0",
    authDomain: "stock2-c7470.firebaseapp.com",
    projectId: "stock2-c7470",
    storageBucket: "stock2-c7470.firebasestorage.app",
    messagingSenderId: "283664471206",
    appId: "1:283664471206:web:3db65c9d1296149b749067",
  };

  // â”€â”€ HEAD ADMIN ì´ë©”ì¼ (ë³¸ì¸ ê³„ì •ìœ¼ë¡œ êµì²´) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const HEAD_ADMIN_EMAIL = "shk@bp.icems.kr";

  const app = initializeApp(firebaseConfig);
  const db  = getFirestore(app);
  const auth = getAuth(app);

  const loginBtn  = document.getElementById("loginBtn");
  const errorMsg  = document.getElementById("errorMsg");

  // â”€â”€ ì´ë¯¸ ë¡œê·¸ì¸ëœ ê²½ìš° ë°”ë¡œ ë¶„ê¸° â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  onAuthStateChanged(auth, async (user) => {
    if (user) await redirectByRole(user);
  });

  // â”€â”€ ë¡œê·¸ì¸ ë²„íŠ¼ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  loginBtn.onclick = async () => {
    const email = document.getElementById("loginEmail").value.trim();
    const pw    = document.getElementById("loginPw").value.trim();
    if (!email || !pw) {
      showError("ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
      return;
    }

    loginBtn.disabled = true;
    loginBtn.innerHTML = `<span class="spinner"></span> ë¡œê·¸ì¸ ì¤‘...`;
    errorMsg.classList.remove("show");

    try {
      const cred = await signInWithEmailAndPassword(auth, email, pw);
      await redirectByRole(cred.user);
    } catch (e) {
      showError("ì´ë©”ì¼ ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.");
      loginBtn.disabled = false;
      loginBtn.textContent = "ë¡œê·¸ì¸";
    }
  };

  // â”€â”€ Enter í‚¤ ì§€ì› â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  document.getElementById("loginPw").addEventListener("keydown", (e) => {
    if (e.key === "Enter") loginBtn.click();
  });

  // â”€â”€ ì—­í• ì— ë”°ë¼ í˜ì´ì§€ ì´ë™ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  async function redirectByRole(user) {
    // 1) Head Admin íŒë³„
    if (user.email === HEAD_ADMIN_EMAIL) {
      window.location.href = "admin.html";
      return;
    }

    // 2) Middle Admin íŒë³„ (Firestore admins ì»¬ë ‰ì…˜)
    try {
      const adminSnap = await getDoc(doc(db, "admins", user.uid));
      if (adminSnap.exists() && adminSnap.data().role === "middle") {
        window.location.href = "admin.html";
        return;
      }
    } catch (e) {
      console.warn("admins ì¡°íšŒ ì‹¤íŒ¨:", e);
    }

    // 3) Student â†’ ê¸°ì¡´ íˆ¬ì í™”ë©´
    window.location.href = "index.html";
  }

  function showError(msg) {
    errorMsg.textContent = msg;
    errorMsg.classList.add("show");
  }

  // â”€â”€ ë°°ê²½ íŒŒí‹°í´ (ë– ë‹¤ë‹ˆëŠ” ì£¼ê°€ ìˆ«ì) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const canvas = document.getElementById("bg-canvas");
  const ctx = canvas.getContext("2d");
  let W, H, particles = [];

  function resize() {
    W = canvas.width  = window.innerWidth;
    H = canvas.height = window.innerHeight;
  }
  resize();
  window.addEventListener("resize", resize);

  const symbols = ["â–²","â–¼","+","âˆ’","$","â‚©","0.5%","1.2%","3.4%","âˆ’2.1%","AAPL","TSLA","NVDA","KRW"];

  for (let i = 0; i < 28; i++) {
    particles.push({
      x: Math.random() * window.innerWidth,
      y: Math.random() * window.innerHeight,
      vx: (Math.random() - 0.5) * 0.3,
      vy: -Math.random() * 0.4 - 0.1,
      text: symbols[Math.floor(Math.random() * symbols.length)],
      alpha: Math.random() * 0.12 + 0.03,
      size: Math.random() * 8 + 8,
      color: Math.random() > 0.5 ? "#2b7cff" : "#ff4d4d",
    });
  }

  function drawParticles() {
    ctx.clearRect(0, 0, W, H);
    particles.forEach(p => {
      ctx.save();
      ctx.globalAlpha = p.alpha;
      ctx.fillStyle = p.color;
      ctx.font = `${p.size}px monospace`;
      ctx.fillText(p.text, p.x, p.y);
      ctx.restore();
      p.x += p.vx;
      p.y += p.vy;
      if (p.y < -20) { p.y = H + 20; p.x = Math.random() * W; }
      if (p.x < -60 || p.x > W + 60) p.x = Math.random() * W;
    });
    requestAnimationFrame(drawParticles);
  }
  drawParticles();
</script>

</body>
</html>
